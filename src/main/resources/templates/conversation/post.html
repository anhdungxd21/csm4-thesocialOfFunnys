<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="/layout :: head">
    <meta charset="UTF-8">
    <title th:text="${conversation.name}"></title>
</head>
<body>
<div id="menu" th:replace="/layout :: menu"></div>

<table>
    <tr>
        <td><h3 th:text="${conversation.name}"></h3></td>
        <td th:if="${user}">
            <form method="post" th:if="${user.getRole()}=='ROLE_ADMIN'">
                <input type="hidden" name="conversationId" th:value="${conversation.getId()}">
                <input type="submit" value="Delete">
            </form>
        </td>
    </tr>
</table>


<img th:src="${conversation.imgSrc}" th:alt="${conversation.name}" width="500px">
<th:block th:if="${user}">
    <form method="post" th:object="${comment}">
        <textarea th:field="${comment.context}" cols="60" rows="10" placeholder="Write a comment here ..."></textarea><br>
        <input type="submit" value="POST">
    </form>
</th:block>
<fieldset>
    <legend>Comment</legend>
    <table>
        <tr th:each="commentOld,valueable : ${comments}">
            <td th:text="${valueable.index +1}"></td>
            <td><a th:href="@{/u/{username}(username=${commentOld.userName})}"><h4 th:text="${commentOld.userName}"></h4></a></td>
            <td th:text="${commentOld.context}"></td>
            <td th:if="${user}">
                <form th:if="${user.getRole()}=='ROLE_ADMIN'" method="post" >
                    <input type="hidden" name="commentId" th:value="${commentOld.getId()}">
                    <input type="submit" value="Delete">
                </form>
            </td>
        </tr>
    </table>
</fieldset>
</body>
</html>